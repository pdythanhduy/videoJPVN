#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

/* POS token highlight (robust, not dependent on dynamic Tailwind classes) */
.pos-token[data-pos="NOUN"] .token-inner { background-color: rgb(59 130 246 / 0.40); }
.pos-token[data-pos="NOUN"][data-active="true"] .token-inner { background-color: rgb(59 130 246); }

.pos-token[data-pos="PROPN"] .token-inner { background-color: rgb(99 102 241 / 0.40); }
.pos-token[data-pos="PROPN"][data-active="true"] .token-inner { background-color: rgb(99 102 241); }

.pos-token[data-pos="PRON"] .token-inner { background-color: rgb(14 165 233 / 0.40); }
.pos-token[data-pos="PRON"][data-active="true"] .token-inner { background-color: rgb(14 165 233); }

.pos-token[data-pos="PARTICLE"] .token-inner { background-color: rgb(16 185 129 / 0.40); }
.pos-token[data-pos="PARTICLE"][data-active="true"] .token-inner { background-color: rgb(16 185 129); }

.pos-token[data-pos="VERB"] .token-inner { background-color: rgb(244 63 94 / 0.40); }
.pos-token[data-pos="VERB"][data-active="true"] .token-inner { background-color: rgb(244 63 94); }

.pos-token[data-pos="ADJ"] .token-inner { background-color: rgb(249 115 22 / 0.40); }
.pos-token[data-pos="ADJ"][data-active="true"] .token-inner { background-color: rgb(249 115 22); }

.pos-token[data-pos="ADV"] .token-inner { background-color: rgb(245 158 11 / 0.40); }
.pos-token[data-pos="ADV"][data-active="true"] .token-inner { background-color: rgb(245 158 11); }

.pos-token[data-pos="EXPR"] .token-inner { background-color: rgb(139 92 246 / 0.40); }
.pos-token[data-pos="EXPR"][data-active="true"] .token-inner { background-color: rgb(139 92 246); }

.pos-token[data-pos="NUM"] .token-inner { background-color: rgb(6 182 212 / 0.40); }
.pos-token[data-pos="NUM"][data-active="true"] .token-inner { background-color: rgb(6 182 212); }

.pos-token[data-pos="AUX"] .token-inner { background-color: rgb(236 72 153 / 0.40); }
.pos-token[data-pos="AUX"][data-active="true"] .token-inner { background-color: rgb(236 72 153); }

.pos-token[data-pos="COUNTER"] .token-inner { background-color: rgb(20 184 166 / 0.40); }
.pos-token[data-pos="COUNTER"][data-active="true"] .token-inner { background-color: rgb(20 184 166); }

.pos-token[data-pos="PUNCT"] .token-inner { background-color: transparent; }
.pos-token[data-pos="PUNCT"][data-active="true"] .token-inner { background-color: transparent; }

.pos-token[data-pos="SYMBOL"] .token-inner { background-color: rgb(120 113 108 / 0.40); }
.pos-token[data-pos="SYMBOL"][data-active="true"] .token-inner { background-color: rgb(120 113 108); }

.pos-token[data-pos="OTHER"] .token-inner { background-color: rgb(107 114 128 / 0.40); }
.pos-token[data-pos="OTHER"][data-active="true"] .token-inner { background-color: rgb(107 114 128); }

/* Token presentation without Tailwind utilities */
.token-shell {
  display: inline-flex;
  align-items: flex-end;
  padding-left: 0px;
  padding-right: 0px;
  border-radius: 0.75rem; /* rounded-xl */
  transition-property: none;
  transition-duration: 0s;
}

.token-active {
  color: #fff;
  box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.token-inner {
  display: inline-block;
  padding: 0 2px; /* provide interior padding so bg doesn't touch glyphs */
  border-radius: 0.5rem;
  transition: none;
  background-color: transparent;
}

.token-ring {
  outline: 2px solid rgba(255, 255, 255, 0.85);
  outline-offset: 2px;
}

.token-romaji {
  margin-top: 0.125rem; /* mt-0.5 */
  font-size: calc(var(--sub-font-size, 12px) * 0.7);
  color: rgba(212, 212, 216, 1); /* text-zinc-300 */
  text-align: center;
}

.token-vi {
  margin-top: 0.125rem; /* mt-0.5 */
  font-size: calc(var(--sub-font-size, 12px) * 0.7);
  color: rgba(244, 244, 245, 1); /* text-zinc-100 */
  text-align: center;
}

/* Map POS colors for legend swatches and small dots */
.legend-swatch[data-pos="NOUN"], .pos-dot[data-pos="NOUN"] { background-color: rgb(59 130 246); }
.legend-swatch[data-pos="PROPN"], .pos-dot[data-pos="PROPN"] { background-color: rgb(99 102 241); }
.legend-swatch[data-pos="PRON"], .pos-dot[data-pos="PRON"] { background-color: rgb(14 165 233); }
.legend-swatch[data-pos="PARTICLE"], .pos-dot[data-pos="PARTICLE"] { background-color: rgb(16 185 129); }
.legend-swatch[data-pos="VERB"], .pos-dot[data-pos="VERB"] { background-color: rgb(244 63 94); }
.legend-swatch[data-pos="ADJ"], .pos-dot[data-pos="ADJ"] { background-color: rgb(249 115 22); }
.legend-swatch[data-pos="ADV"], .pos-dot[data-pos="ADV"] { background-color: rgb(245 158 11); }
.legend-swatch[data-pos="EXPR"], .pos-dot[data-pos="EXPR"] { background-color: rgb(139 92 246); }
.legend-swatch[data-pos="NUM"], .pos-dot[data-pos="NUM"] { background-color: rgb(6 182 212); }
.legend-swatch[data-pos="AUX"], .pos-dot[data-pos="AUX"] { background-color: rgb(236 72 153); }
.legend-swatch[data-pos="COUNTER"], .pos-dot[data-pos="COUNTER"] { background-color: rgb(20 184 166); }
.legend-swatch[data-pos="PUNCT"], .pos-dot[data-pos="PUNCT"] { background-color: rgb(113 113 122); }
.legend-swatch[data-pos="SYMBOL"], .pos-dot[data-pos="SYMBOL"] { background-color: rgb(120 113 108); }
.legend-swatch[data-pos="OTHER"], .pos-dot[data-pos="OTHER"] { background-color: rgb(107 114 128); }

/* Global app layout (no Tailwind) */
.app-root {
  min-height: 100vh;
  width: 100%;
  color: #e5e7eb; /* zinc-200 */
  padding: 1rem; /* p-4 */
}
@media (min-width: 768px) {
  .app-root { padding: 2rem; /* md:p-8 */ }
}

.app-container {
  max-width: 100%;
  margin: 0 auto; /* mx-auto */
}
.app-container > * + * { margin-top: 1rem; /* space-y-4 */ }

.app-header { display: flex; align-items: center; justify-content: space-between; }
.header-left { display: flex; align-items: center; gap: 0.75rem; }
.header-actions { display: flex; align-items: center; gap: 1rem; flex-wrap: wrap; }
.upload-group, .tools-group, .other-group { display: flex; align-items: center; gap: 0.5rem; }
.app-title { font-weight: 700; font-size: 1.25rem; }
@media (min-width: 768px) { .app-title { font-size: 1.5rem; } }

.icon-4 { width: 1rem; height: 1rem; }
.icon-5 { width: 1.25rem; height: 1.25rem; }
.icon-6 { width: 1.5rem; height: 1.5rem; }

.btn-upload {
  display: inline-flex; align-items: center; gap: 0.5rem;
  padding: 0.375rem 0.75rem; border-radius: 1rem; background: #27272a; color: #e4e4e7;
  cursor: pointer; user-select: none;
}
.btn-upload:hover { background: #3f3f46; }
.btn-label { font-size: 0.875rem; }

.layout { display: block; }
@media (min-width: 768px) {
  .layout { display: grid; grid-template-columns: repeat(12, minmax(0, 1fr)); gap: 1rem; }
}

.video-wrapper {
  position: relative; width: 100%; border-radius: 1rem; overflow: hidden; background: #000; 
  box-shadow: 0 10px 15px rgba(0,0,0,0.5);
}
@media (min-width: 768px) { .video-wrapper { grid-column: span 12; } }
@media (min-width: 1024px) { .video-wrapper { grid-column: span 12; } }
.video-wrapper video { width: 100%; height: auto; display: block; }

/* TikTok portrait sizing (9:16) */
.video-wrapper.tiktok {
  width: min(480px, 100%);
  aspect-ratio: 9 / 16;
  margin-left: auto;
  margin-right: auto;
}
.video-wrapper.tiktok video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.video-placeholder {
  aspect-ratio: 9 / 16; width: 100%; display: flex; align-items: center; justify-content: center; background: #18181b;
}
.placeholder-text { text-align: center; opacity: 0.9; }
.placeholder-title { font-size: 1.125rem; font-weight: 500; }
.placeholder-desc { font-size: 0.875rem; color: #a1a1aa; }

.subtitle-overlay { position: absolute; left: 0; right: 0; bottom: 0; pointer-events: none; padding: 8px 8px 36px 8px; transform: translateY(var(--sub-offset-y, 0px)); will-change: transform; }
.subtitle-overlay.center { top: 50%; bottom: auto; padding: 8px; transform: translateY(calc(-50% + var(--sub-offset-y, 0px))); }
.overlay-inner { margin: 0 auto; max-width: 100%; }
.overlay-panel { backdrop-filter: blur(4px); border-radius: 1rem; padding: 0.5rem 0.75rem; }
@media (min-width: 768px) { .overlay-panel { padding: 0.75rem 1rem; } }
.subs-current { line-height: 1.5; font-weight: 600; font-size: var(--sub-font-size, 12px); }
.subs-current[data-hl="off"] .token-inner { background-color: transparent !important; }
.subs-current[data-hl="off"] .token-ring { outline: none !important; }
.token-line { display: flex; flex-wrap: wrap; align-items: flex-end; gap: 3px; justify-content: center; }
.token-line ruby { display: inline-flex; flex-direction: column; align-items: center; }
.token-line rt { line-height: 1; margin-bottom: 2px; }
.subs-current .token-line + .token-line { margin-top: 6px; }
.empty { text-align: center; color: #d4d4d8; }
.overlay-vi { text-align: center; margin-top: 0.5rem; font-size: var(--sub-font-size, 12px); color: rgba(228,228,231,0.95); font-weight: 500; }

/* Drag handle to move subtitles vertically */
.overlay-drag-handle {
  position: absolute;
  left: 0;
  right: 0;
  top: -12px;
  height: 12px;
  pointer-events: auto;
  cursor: ns-resize;
}

/* Speaker tag and labels */
.speaker-tag { font-weight: 700; margin-right: 0.25rem; color: #e4e4e7; }
.hiragana-label { font-size: 0.75rem; color: #a1a1aa; margin-bottom: 0.25rem; text-align: center; }

/* Hiragana reading line */
.hira-line { text-align: center; font-size: 0.875rem; color: #d4d4d8; margin-bottom: 0.25rem; }

.controls-row { display: flex; flex-direction: column; gap: 0.75rem; }
@media (min-width: 768px) { .controls-row { flex-direction: row; align-items: center; justify-content: space-between; } }
.controls-left { display: flex; align-items: center; gap: 0.5rem; }
.controls-right { display: flex; flex-wrap: wrap; align-items: center; gap: 0.5rem; }
.btn { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 1rem; background: #27272a; color: #e4e4e7; border: none; cursor: pointer; }
.btn:hover { background: #3f3f46; }
.control-group { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0.75rem; border-radius: 1rem; background: #27272a; }
.slider { width: 7rem; }
.rate-value { font-size: 0.875rem; width: 2.5rem; text-align: right; }
.check-label { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0.75rem; border-radius: 1rem; background: #27272a; cursor: pointer; }

.segments-panel { border-radius: 1rem; background: rgba(24, 24, 27, 0.6); padding: 0.75rem; }
@media (min-width: 768px) { .segments-panel { padding: 1rem; } }
.segments-header { display: flex; align-items: center; justify-content: space-between; }
.now-badge { font-size: 0.75rem; color: #a1a1aa; }
.segment-list { max-height: 18rem; overflow: auto; padding-right: 0.25rem; }
.segment-card { border-radius: 0.75rem; padding: 0.5rem 0.75rem; border: 1px solid transparent; background: rgba(39, 39, 42, 0.4); }
.segment-card.is-active { border-color: #71717a; background: rgba(39, 39, 42, 0.6); }
.segment-top { display: flex; align-items: center; justify-content: space-between; font-size: 0.75rem; color: #a1a1aa; }
.btn-seek { padding: 0.25rem 0.5rem; background: #3f3f46; color: #e4e4e7; border: none; border-radius: 0.5rem; cursor: pointer; }
.btn-seek:hover { background: #52525b; }
.seg-text { margin-top: 0.5rem; font-size: 0.875rem; }
.seg-jp { color: #e5e7eb; font-weight: 500; }
.seg-vi { color: #a1a1aa; }
.segment-tokens { margin-top: 0.5rem; display: flex; flex-wrap: wrap; gap: 0.25rem; }
.segment-token-btn { font-size: 0.75rem; padding: 0.25rem 0.5rem; border: 1px solid rgba(82, 82, 91, 0.4); border-radius: 0.5rem; background: rgba(63, 63, 70, 0.4); cursor: pointer; }
.segment-token-btn:hover { background: rgba(63,63,70,0.6); }
.segment-token-btn.is-active { outline: 2px solid #d4d4d8; }
.segment-token-content { display: inline-flex; align-items: center; gap: 0.25rem; }
.pos-dot { display: inline-block; width: 0.5rem; height: 0.5rem; border-radius: 9999px; }
.segment-token-label { display: inline-block; padding: 0 0.25rem; border-radius: 0.375rem; background: rgba(255,255,255,0.2); }
.segment-token-label.is-active { background: rgba(255,255,255,0.4); }

.legend-panel { border-radius: 1rem; background: rgba(24,24,27,0.6); padding: 0.75rem; }
.legend-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
.legend-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 0.5rem; }
@media (min-width: 640px) { .legend-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
@media (min-width: 768px) { .legend-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); } }
.legend-item { display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; }
.legend-swatch { display: inline-block; width: 0.75rem; height: 0.75rem; border-radius: 0.25rem; }
.legend-label { color: #e4e4e7; font-weight: 500; }
.legend-note { font-size: 0.75rem; color: #a1a1aa; margin-top: 0.5rem; }

.info-panel { border-radius: 1rem; background: rgba(24,24,27,0.4); padding: 0.75rem; font-size: 0.875rem; line-height: 1.6; color: #d1d5db; }
.info-title { font-weight: 600; color: #e4e4e7; margin-bottom: 0.5rem; }
